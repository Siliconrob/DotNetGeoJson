using System.Collections.Generic;
using NUnit.Framework;
using Terradue.GeoJson.Feature;
using Terradue.GeoJson.Geometry;

namespace Terradue.GeoJson.Tests
{
  [TestFixture]
  public class WktTransformation
  {
    private readonly GeographicPosition Position1 = new GeographicPosition(10, 124);
    private readonly GeographicPosition Position2 = new GeographicPosition(11, 124);
    private readonly GeographicPosition Position3 = new GeographicPosition(10, 125);
    private readonly GeographicPosition Position4 = new GeographicPosition(10, 124);

    [Test]
    public void PointFeatureToWkt()
    {
      var pointf = new PointFeature(new Point(Position1));
      var wkt = pointf.ToWkt();
      Assert.AreEqual("POINT(124 10)", wkt);
    }

    [Test]
    public void LineStringFeatureToWkt()
    {
      var linestringf =
        new LineStringFeature(new LineString(
          new List<IPosition> {Position1, Position2, Position3}));
      var wkt = linestringf.ToWkt();
      Assert.AreEqual("LINESTRING(124 10,124 11,125 10)", wkt);
    }

    [Test]
    public void PolygonFeatureToWkt()
    {
      var list = new List<LineString>
      {
        new LineString(
          new List<IPosition> {Position1, Position2, Position3, Position4})
      };

      var polygonf =
        new PolygonFeature(new Polygon(list));
      var wkt = polygonf.ToWkt();
      Assert.AreEqual("POLYGON((124 10,124 11,125 10,124 10))", wkt);
    }

    [Test]
    public void WktToPolygon()
    {
      var test = "POLYGON ((-118.23213996 44.25608304, -118.23364115999999 44.21248299, -118.22834015999999 44.21248299, -118.22818715999999 44.18323803, -118.22743512 44.039980979999996, -118.22762592 43.779179969999994, -118.230111 43.77906297, -118.23192612 43.778979989999996, -118.23248591999999 43.612280999999996, -118.23212915999999 43.50082302, -118.23204383999999 43.49988, -118.23206112 43.43677596, -118.23206183999999 43.43565096, -118.23204491999999 43.34911596, -118.22804783999999 43.349147009999996, -118.22785703999999 43.249879979999996, -118.22843916 43.09670601, -118.22851007999999 43.086086009999995, -118.22866092 43.06275702, -118.22849208 43.061087969999996, -118.22854211999999 43.04282499, -118.22844887999999 42.99988104, -118.22862203999999 42.997389029999994, -118.22904899999999 42.91458102, -118.21668804 42.914547, -118.21640292 42.805901969999994, -118.21472496 42.27602904, -118.19536091999998 42.275869019999995, -118.19712383999999 42.12489204, -118.19702591999999 42.12335097, -118.197189 41.99699502, -118.12394484 41.99729796, -117.87346691999998 41.99833503, -117.73779191999999 41.99820696, -117.65823011999998 41.99813199, -117.62597303999999 41.99810202, -117.62373095999999 41.998466969999996, -117.61718796 41.998509989999995, -117.61320815999999 41.998535999999994, -117.53019683999999 41.99908401, -117.506682 41.999238989999995, -117.44306207999999 41.999659019999996, -117.40361291999999 41.99929002, -117.21755087999999 41.99988699, -117.19779804 42.000380009999994, -117.06861312 42.00003504, -117.05540183999999 41.99988996, -117.04890995999999 41.99898303, -117.04090607999998 41.99988996, -117.02619684 41.99988996, -117.02609783999999 42.117647039999994, -117.02658996 42.13325799, -117.02619503999999 42.166404, -117.02612916 42.35719302, -117.02655107999999 42.37855704, -117.02657484 42.43046103, -117.026631 42.55222302, -117.02666484 42.62487804, -117.02633112 42.807015, -117.02630303999999 42.80716998, -117.026253 42.807446999999996, -117.02668283999999 43.024876019999994, -117.02665187999999 43.02512802, -117.02670083999999 43.31529198, -117.02671883999999 43.420805009999995, -117.02674115999999 43.545734999999993, -117.02674404 43.564721039999995, -117.02674511999999 43.57370898, -117.02674583999999 43.577525969999996, -117.02677392 43.57867401, -117.02692187999999 43.593632009999993, -117.02688911999999 43.596033029999994, -117.02682395999999 43.600356989999995, -117.02675987999999 43.60191201, -117.02678904 43.610669009999995, -117.02693699999999 43.61761404, -117.02700107999999 43.62103197, -117.02690496 43.62488001, -117.02670515999999 43.63165899, -117.02666088 43.664384969999993, -117.02671704 43.67552301, -117.02662308 43.680864959999994, -117.026586 43.68300102, -117.02669687999999 43.693739009999994, -117.02682503999999 43.706193029999994, -117.02672496 43.71481503, -117.02684088 43.73290503, -117.02665115999999 43.733934989999995, -117.02664107999999 43.778568959999994, -117.02663387999999 43.808110019999994, -117.02402099999999 43.812287999999995, -117.02304899999999 43.813842029999996, -117.02211084 43.817321969999995, -117.02154995999999 43.819401959999993, -117.02357711999998 43.82381097, -117.02793095999999 43.826285969999994, -117.03288095999999 43.830025019999994, -117.031887 43.834156019999995, -117.02955888 43.83906003, -117.02515607999999 43.841333969999994, -117.01846511999999 43.841343959999996, -117.01283111999999 43.84000098, -117.00900216 43.84232298, -117.00769715999999 43.846238969999995, -117.010701 43.84975401, -117.01585404 43.85145996, -117.01944395999999 43.85211201, -117.022707 43.85439603, -117.02198591999999 43.85641302, -117.02107511999999 43.85896398, -117.01618092 43.86059604, -117.01077011999999 43.862268959999994, -117.00869112 43.862688989999995, -116.99906112 43.86463704, -116.99141508 43.863864029999995, -116.98810415999999 43.86543201, -116.98415207999999 43.86679398, -116.98293996 43.867709999999995, -116.98234704 43.868840039999995, -116.98221383999999 43.871228009999996, -116.983809 43.87658103, -116.98381187999999 43.87694301, -116.98383383999999 43.880046029999995, -116.98383996 43.880846039999994, -116.980875 43.885658969999994, -116.97617412 43.89464502, -116.976114 43.89475896, -116.97649992 43.89712803, -116.97669395999999 43.90036101, -116.976429 43.90129296, -116.97733188 43.905812039999994, -116.97856415999999 43.907254019999996, -116.97996095999999 43.908887969999995, -116.98191899999999 43.91247798, -116.97958007999999 43.915253039999996, -116.97236208 43.91645301, -116.96261507999999 43.91748, -116.95875192 43.923246029999994, -116.95936284 43.927739009999996, -116.95999284 43.93064997, -116.96180616 43.932797009999994, -116.96764103999999 43.93479204, -116.96893091999999 43.93700703, -116.96895611999999 43.937750969999996, -116.96902811999999 43.939920959999995, -116.96821415999999 43.941880979999993, -116.96429196 43.944285959999995, -116.96225111999999 43.94809701, -116.96177015999999 43.95214899, -116.96041512 43.954563959999994, -116.96126399999999 43.955999999999996, -116.96491511999999 43.95630096, -116.97157404 43.95696399, -116.97233111999999 43.958357009999993, -116.97049007999999 43.95976398, -116.95980816 43.963814969999994, -116.95920587999998 43.966359989999994, -116.96168304 43.968168, -116.96631407999999 43.96888404, -116.96863391999999 43.96841199, -116.97087995999999 43.968302009999995, -116.97155604 43.970111999999993, -116.97380711999999 43.972187039999994, -116.97552504 43.973091, -116.97617987999999 43.974719009999994, -116.97343487999999 43.97708502, -116.96874299999999 43.97747697, -116.95987115999999 43.98292503, -116.94275712 43.984043009999994, -116.93819484 43.98459003, -116.93558411999999 43.98687396, -116.93584691999999 43.990874999999996, -116.94242016 43.99943697, -116.94321504 44.001692999999996, -116.94374207999999 44.00318898, -116.94173507999999 44.00691696, -116.94145787999999 44.00743104, -116.94145608 44.007433019999993, -116.93591099999999 44.01265203, -116.93448503999998 44.02124901, -116.93569607999999 44.024695019999996, -116.93734199999999 44.02937601, -116.94336084 44.03564496, -116.95057415999999 44.03969901, -116.95569407999999 44.042578019999993, -116.95574088 44.04260403, -116.95624595999999 44.042887979999996, -116.97204599999999 44.04860496, -116.97250392 44.048771009999996, -116.97318503999999 44.049425039999996, -116.97401591999999 44.05366296, -116.97457284 44.058952979999994, -116.97697907999999 44.081831969999996, -116.97735096 44.08536402, -116.97425315999999 44.08829496, -116.96720291999999 44.09093601, -116.95700916 44.09174304, -116.94313188 44.09406, -116.94027492 44.09561502, -116.93783484 44.096942969999994, -116.93370383999999 44.10003897, -116.92830599999999 44.107325999999993, -116.92768788 44.10943803, -116.92944216 44.112620969999995, -116.92906883999999 44.113971959999994, -116.925642 44.11892898, -116.91899099999999 44.123277959999996, -116.91641016 44.125462979999995, -116.91423612 44.12730402, -116.91375984 44.128380959999994, -116.91323892 44.13292902, -116.91121788 44.139992039999996, -116.90332704 44.144422019999993, -116.90192196 44.145930959999994, -116.90173691999999 44.14861998, -116.90083403999999 44.150099039999994, -116.89790004 44.15261004, -116.89593083999999 44.15429502, -116.89430904 44.15811399, -116.89408295999999 44.16019101, -116.89502796 44.166446009999994, -116.89575695999999 44.17126704, -116.90010287999999 44.176851, -116.90275211999999 44.17946703, -116.91573804 44.18315199, -116.92402811999999 44.188440029999995, -116.92539215999999 44.19154404, -116.93544299999999 44.19396198, -116.93929716 44.193771, -116.94053412 44.193709979999994, -116.94525587999999 44.191676969999996, -116.94759083999999 44.191263959999993, -116.94951611999998 44.191572029999996, -116.96549796 44.194125959999994, -116.96725907999999 44.194581, -116.97167483999999 44.197255979999994, -116.97370091999998 44.20801701, -116.97260003999999 44.213200019999995, -116.97021899999999 44.21749302, -116.97036515999999 44.221221, -116.97394499999999 44.22593196, -116.97399107999999 44.22982104, -116.97253703999999 44.232836039999995, -116.97195815999999 44.235676979999994, -116.97282899999999 44.238042, -116.97354216 44.239979969999993, -116.97590484 44.242844039999994, -116.98182503999999 44.24426604, -116.98687007999999 44.24547699, -117.00100008 44.245385999999996, -117.00368207999999 44.24538699, -117.008001 44.24538798, -117.01692107999999 44.245391039999994, -117.02023091999999 44.24606298, -117.02527703999999 44.24850504, -117.02755799999998 44.248880969999995, -117.03186215999999 44.248635, -117.03584987999999 44.24680503, -117.04228307999999 44.242775009999995, -117.04551299999999 44.23200498, -117.04706207999999 44.229742019999996, -117.04740804 44.229636989999996, -117.05005691999999 44.22882996, -117.05303015999999 44.229076019999994, -117.05650992 44.230874039999996, -117.05935211999999 44.237243969999994, -117.06728399999999 44.244009989999995, -117.07419203999999 44.24767704, -117.07835003999999 44.24988501, -117.08950284 44.25823404, -117.09093311999999 44.26031097, -117.09357804 44.269382969999995, -117.09456983999999 44.270978039999996, -117.09853091999999 44.27553303, -117.10224215999999 44.278799039999996, -117.10420812 44.279939969999994, -117.10767311999999 44.280763019999995, -117.11161691999999 44.280666989999993, -117.11801807999998 44.278945019999995, -117.12103703999999 44.27758503, -117.13090392 44.26945299, -117.13253003999999 44.26704504, -117.13310388 44.264235959999993, -117.13398407999999 44.262972, -117.13852295999999 44.25937002, -117.14339412 44.25826203, -117.15706008 44.25749001, -117.17034191999998 44.25888996, -117.19312883999999 44.270963009999996, -117.19814688 44.27382798, -117.19855908 44.27414604, -117.21697415999999 44.288357039999994, -117.22264704 44.297577989999994, -117.22245084 44.298962999999993, -117.22006907999999 44.30138202, -117.30419604 44.30137599, -117.40526711999999 44.30160702, -117.48615299999999 44.30142, -117.48571704 44.374881959999996, -117.48589883999999 44.38769598, -117.50616108 44.38721502, -117.50942484 44.38724499, -117.50958612 44.40182598, -117.52953299999999 44.401649039999995, -117.52969391999999 44.41572297, -117.56988 44.41549104, -117.57010607999999 44.430270029999996, -117.59081004 44.43007797, -117.59099183999999 44.444460959999994, -117.60870492 44.444366009999996, -117.63147384 44.44435701, -117.74967588 44.44399197, -117.75363191999999 44.443836, -117.97159608 44.44332804, -117.97159715999999 44.42962599, -118.01134187999999 44.429682959999994, -118.01134115999999 44.41528296, -118.03144212 44.41518297, -118.03174091999999 44.389882979999996, -118.05194087999999 44.38998297, -118.05163991999999 44.37198297, -118.07183987999998 44.37178299, -118.07193996 44.35738299, -118.08694007999999 44.357482979999993, -118.08663983999999 44.34308298, -118.09154016 44.34308298, -118.09223891999999 44.328682979999996, -118.11183983999999 44.328682979999996, -118.11173903999999 44.31418299, -118.13204015999999 44.31388302, -118.13183891999999 44.29948302, -118.15233984 44.29958301, -118.152639 44.270682029999996, -118.19333988 44.27068401, -118.19324015999999 44.25608403, -118.23213996 44.25608304))";
      var feature = GeometryFactory.WktToFeature(test);
      Assert.Pass("WKT to Polygon passed");
    }
  }
}